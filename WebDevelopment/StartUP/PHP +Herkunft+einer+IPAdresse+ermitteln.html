<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
<link rel="SHORTCUT ICON" href="./favicon.ico">
<link rel="alternate" type="application/rss+xml" title="Newsfeed von www.it-academy.cc" href="/newsfeed.rss">
<TITLE>PHP: Herkunft einer IP-Adresse ermitteln  - Artikel von www.it-academy.cc - Verein für Informationstechnologie</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="DESCRIPTION" CONTENT="In diesem Artikel wird erklärt, wie man mit einem einfachen PHP-Skript und einer Datenbank das Land bestimmen kann, aus dem eine eingegebene IP-Adresse kommt.">
<META NAME="KEYWORDS" CONTENT="In diesem Artikel wird erklärt, wie man mit einem einfachen PHP-Skript und einer Datenbank das Land bestimmen kann, aus dem eine eingegebene IP-Adresse kommt.">
<link rel="stylesheet" type="text/css" href="/common/style.css">

</HEAD>
<BODY>
<a name="top"></a>


<div style="background-image:url(/common/images/design/topback.gif);width:100%;height:114px;background-repeat:repeat-x;">
	<a href="/index.php"><img style="float:left;" src="/common/images/design/logo.gif" width="282" height="114" alt="IT-Academy Logo"></a>
	<div style="text-align:right;">
		<div style="height:60px;margin:0px;padding-top:5px;">
<script>
if(typeof(adlink_randomnumber)=="undefined"){var adlink_randomnumber=Math.floor(Math.random()*10000000000)}
if(typeof(WLRCMD)=="undefined"){var WLRCMD=""}
if(typeof(adlink_tile)=="undefined"){var adlink_tile=1}else{adlink_tile++}
 document.write('<scr'+'ipt language="JavaScript" src="http://ad.at.doubleclick.net/adj/itacademy.cc/DE_ROS_FBRX_T_468x60;'+WLRCMD+';dcopt=ist;sz=468x60;tile='+adlink_tile+';ord='+adlink_randomnumber+'?"><\/scr'+'ipt>');
</script>
<noscript>
<a href="http://ad.at.doubleclick.net/jump/itacademy.cc/DE_ROS_FBRX_T_468x60;sz=468x60;TILE=1;ord=1234567890?" target="_blank">
<img src="http://ad.at.doubleclick.net/ad/itacademy.cc/DE_ROS_FBRX_T_468x60;sz=468x60;TILE=1;ord=1234567890?" border="0">
</a></noscript>	
		<img src="/common/images/design/werbungbild.gif" width="15" height="62" alt="" style="position: relatve; top: 2px; right: 2px;">
		</div>
		<div style="margin:0px;height:0px;padding-top:17px;">
		<!--[if lt IE 7]><p style="margin:-6px;height:37px;"><![endif]-->
<a href="/user/SignUp.html"><img src="/common/images/design/signup.gif" width="45" height="32" alt="Sign Up"></a>		<img src="/common/images/design/adminr.gif" width="20" height="32" alt="">
<a href="/user/LogIn.html"><img src="/common/images/design/login.gif" width="52" height="32" alt="Login"></a>		<img src="/common/images/design/logoutr.gif" width="17" height="32" alt="">
		<a href="/user/dokumentation.php"><img src="/common/images/design/help.gif" width="42" height="32" alt="Help"></a>
		<!--[if lt IE 7]></p><![endif]-->
		</div>
	</div>
</div>
<table cellspacing="0">
<tr>
<td class="left-side text center">

	<div class="left-side">
		<br><br>
		<img src="/common/images/design/register/suche.gif" width="150" height="20" alt="Suche">
		<div class="box text">
		 <form name="Search" action="/user/search.php" method="POST">
		  <input type="text" name="search" class="eingabefelder" style="width:97%;"><br><br>
		  <select name="SearchIn" class="eingabefelder">
		   <option value="1" selected>Volltextsuche</option>
		   <option value="2">Artikel</option>
		   <option value="3">Glossar</option>
		   <option value="4">Userbeitr&auml;ge</option>
		  </select>
		  <input type="submit" name="submit" class="eingabefelder" value="GO" style="width:25px;">
		 </form>
		</div>

		<img src="/common/images/design/register/content.gif" width="150" height="20" alt="Content">
		<div class="box text">
<a href="/menu/2/Announcements.html" class="toolbar">&raquo; Announcements</a><br>
<a href="/menu/3/Betriebssysteme.html" class="toolbar">&raquo; Betriebssysteme</a><br>
<a href="/menu/32/Fortbildung&shy;+Lektuere.html" class="toolbar">&raquo; Fortbildung&shy;&amp;Lekt&uuml;re</a><br>
<a href="/menu/35/Hardware.html" class="toolbar">&raquo; Hardware</a><br>
<a href="/menu/50/Internet.html" class="toolbar">&raquo; Internet</a><br>
<a href="/menu/63/Mobiles.html" class="toolbar">&raquo; Mobiles</a><br>
<a href="/menu/73/Netzwerke.html" class="toolbar">&raquo; Netzwerke</a><br>
<a href="/menu/78/Programmieren.html" class="toolbar">&raquo; Programmieren</a><br>
<a href="/menu/217/Wirtschaft.html" class="toolbar">&raquo; Wirtschaft</a><br>
<br>
			<a href="/forum.php" class="toolbar">&raquo; Forum</a><br>
						<a href="/glossar/" class="toolbar">&raquo; Glossar</a><br>
			<a href="http://www.it-news.cc" class="toolbar">&raquo; News</a><br>
			<a href="/mobile/" class="toolbar">&raquo; Mobile</a><br>
			<a href="http://www.zanox-affiliate.de/ppc/?3811179C1464660384T&amp;ULPE=%5b%5b&amp;ctbg=%23FFFFFF&amp;ctft=%23000000&amp;ttbg=%236699cc&amp;ttft=%23000000&amp;lkft=%23000066&amp;toolbar=off" target="_blank" class="toolbar">&raquo; Shop</a><br>
			<a href="/menu/Sitemap.html" class="toolbar">&raquo; Sitemap</a>
		</div>

		<img src="/common/images/design/register/intern.gif" width="150" height="20" alt="Intern">
		<div class="box text">
			<a href="http://www.thecube.cc/ita.php" class="toolbar">&raquo; &Uuml;ber uns</a><br>
			<a href="http://www.thecube.cc/presse.php" class="toolbar">&raquo; Pressedaten</a><br>
			<a href="http://www.thecube.cc/rechtliches.php" class="toolbar">&raquo; Rechtliches</a><br>
			<a href="http://www.thecube.cc/contact.php" class="toolbar">&raquo; Kontakt/Impressum</a><br>
			<a href="http://www.thecube.cc/ita.php" class="toolbar">&raquo; Mediadaten</a><br>
		</div>

		<img src="/common/images/design/register/partner.gif" width="150" height="20" alt="Partner">
		<div class="box text">
			<br>
			<div class="center">
				<a href="http://www.etel.at" target="_blank"><img src="/common/images/partner/etel.gif" width="125" height="65"  alt="etel"></a><br><br>
				<a href="http://www.hakin9.org/de" target="_blank"><img src="/common/images/partner/hakin9.gif" width="125" height="40" alt="Hakin9" style="border: 1px solid black;"></a><br><br>
				<a href="http://www.amazon.de/exec/obidos/redirect-home?tag=wwwitacademcc-21&amp;site=home" target="_blank"><img src="/common/images/partner/amazon_small.gif" width="125" height="40" alt="In Partnerschaft mit Amazon.de"></a><br><br>
				<a href="http://pc-intern.com" target="_blank" title="PC-Intern IT-Weblog, Netculture and more"><img src="/common/images/partner/pc-intern-ita-banner.gif" width="125" height="40" alt="PC-Intern IT-Weblog, Netculture and more" style="border: 1px solid black;"></a><br><br>
<!--
				<a href="http://store.geemag.de" target="_blank" title="gemmag store"><img src="/common/images/partner/geestore.jpg" width="125" height="40" alt="geemag store" style="border: 1px solid black;"></a><br><br>
				<a href="http://fussideluxe.de" target="_blank" title="fussideluxe online shop"><img src="/common/images/partner/fussideluxe.jpg" width="125" height="40" alt="fussideluxe online shop" style="border: 1px solid black;"></a><br><br>
-->


					<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
					</script>
					<script type="text/javascript">
					_uacct = "UA-288126-1";
					urchinTracker();
					</script>
			</div>
		</div>
	</div>

</td><td class="text body w-100-p">
				
<!-- Begin of whereami -->
<a class="toolbar" href="http://www.it-academy.cc">Home</a> - <a href="/menu/78/Programmieren.html" class="toolbar">Programmieren</a> - <a href="/menu/88/PHP.html" class="toolbar">PHP</a> - PHP: Herkunft einer IP-Adresse ermitteln <!-- End of whereami -->
				<hr noshade="noshade">
<script>
if(typeof(adlink_randomnumber)=="undefined"){var adlink_randomnumber=Math.floor(Math.random()*10000000000)}
if(typeof(WLRCMD)=="undefined"){var WLRCMD=""}
if(typeof(adlink_tile)=="undefined"){var adlink_tile=1}else{adlink_tile++}
 document.write('<scr'+'ipt language="JavaScript" src="http://ad.at.doubleclick.net/adj/itacademy.cc/DE_ROS_LDB_T_728x90;'+WLRCMD+';sz=728x90;tile='+adlink_tile+';ord='+adlink_randomnumber+'?"><\/scr'+'ipt>');
</script>
<noscript>
<a href="http://ad.at.doubleclick.net/jump/itacademy.cc/DE_ROS_LDB_T_728x90;sz=728x90;TILE=2;ord=1234567890?" target="_blank">
<img src="http://ad.at.doubleclick.net/ad/itacademy.cc/DE_ROS_LDB_T_728x90;sz=728x90;TILE=2;ord=1234567890?" border="0">
</a></noscript><br><br>
         		<script language="JavaScript" type="text/javascript">
								<!--
								function showDruckansicht()
								{
  								window.open("/content/article_print.php?ArticleID=1467", "_blank", "location=no,directories=no,scrollbars=yes,status=no,,resizable=0,copyhistory=no,width=600,height=500,left=50,top=50");
 								}
								// -->
								</script>

						<p class="ueberschrift"><br>PHP: Herkunft einer IP-Adresse ermitteln </p>
                          <i>In diesem Artikel wird erklärt, wie man mit einem einfachen PHP-Skript und einer Datenbank das Land bestimmen kann, aus dem eine eingegebene IP-Adresse kommt.</i><br><br><script>
if(typeof(adlink_randomnumber)=="undefined"){var adlink_randomnumber=Math.floor(Math.random()*10000000000)}
if(typeof(WLRCMD)=="undefined"){var WLRCMD=""}
if(typeof(adlink_tile)=="undefined"){var adlink_tile=1}else{adlink_tile++}
 document.write('<scr'+'ipt language="JavaScript" src="http://ad.at.doubleclick.net/adj/itacademy.cc/DE_ROS_REC_C_300x250;'+WLRCMD+';sz=300x250;tile='+adlink_tile+';ord='+adlink_randomnumber+'?"><\/scr'+'ipt>');
</script>
<noscript>
<a href="http://ad.at.doubleclick.net/jump/itacademy.cc/DE_ROS_REC_C_300x250;sz=300x250;TILE=4;ord=1234567890?" target="_blank">
<img src="http://ad.at.doubleclick.net/ad/itacademy.cc/DE_ROS_REC_C_300x250;sz=300x250;TILE=4;ord=1234567890?" border="0">
</a></noscript><br>
                          <table width="100%" border="0" cellspacing="1" cellpadding="0">
                            <tr>
                              <td width="100" class="text"><b>Autor:</b></td>
                              <td width="*" class="text"><a href="/user/2241/Goergi/RankingDetails.html">Jakob Görg (Goergi)</a></td>
                            </tr>
                            <tr>
                              <td width="100" class="text"><b>Datum:</b></td>
                              <td width="*" class="text">26-05-2006, 23:14:08</td>
                            </tr>
                            <tr>
                              <td width="100" valign="top" class="text"><b>Referenzen:</b></td>
                              <td width="*" class="text">Google, webhosting.info</td>
                            </tr>
                            <tr>
                              <td width="100" valign="top" class="text"><b>Schwierigkeit:</b></td>
                              <td width="*" class="text">Anfänger</td>
                            </tr>
												            <tr>
                              <td width="100" valign="top" class="text"><b>Ansichten:</b></td>
                              <td width="*" class="text">12897x</td>
                            </tr>
                            <tr>
                              <td width="100" class="text"><b>Rating:</b></td>
                              <td width="*" class="text">Bisher keine Bewertung.
								</td>
                            </tr>
                          </table><br>
				 <u>Hinweis:</u><br><br>
                                  F&uuml;r den hier dargestellte Inhalt ist nicht der Betreiber der Plattform,
                                  sondern der jeweilige Autor verantwortlich.<br>
                                  Falls Sie Missbrauch vermuten, bitten wir Sie, uns unter <a href="&#x6d;&#x61;&#105;&#x6c;&#116;&#111;&#58;&#109;&#105;&#115;&#115;&#x62;&#x72;&#x61;&#x75;&#99;&#x68;&#64;&#105;&#x74;&#45;&#97;&#x63;&#97;&#x64;&#x65;&#109;&#121;&#x2e;&#x63;&#99;">&#109;&#105;&#115;&#115;&#x62;&#x72;&#x61;&#x75;&#99;&#x68;&#64;&#105;&#x74;&#45;&#97;&#x63;&#97;&#x64;&#x65;&#109;&#121;&#x2e;&#x63;&#99;</a>
                                  zu kontaktieren.<br>
                                  <br>

                          <span style="background-color:#EEEEEE; border: 1px solid #999999; padding: 2px;"><a href="javascript:showDruckansicht()">[Druckansicht]</a> <a href="/admin/user_login.php?URL=/content/article_send.php-ID=1467">[Als E-Mail senden]</a> <a href="/admin/user_login.php?URL=/content/article_comment.php-ID=1467">[Kommentar verfassen]</a> </span>
<br>

						  <br><span class="text">Zu Beginn des Artikels wollen wir gleich klären, wozu man überhaupt diese Funktion braucht. Nun: die Gründe können verschieden sein; zum Beispiel lassen sich folgende Dinge später leicht realisieren: automatische Auswahl der Währung in internationalen Online-Shops, Besucherstatistiken, Spam Filter, Blockierung von Inhalten für bestimmte Herkunftsländer, ...<br>
<br>
Das Wichtigste ist natürlich die IP-Adresse selbst. Diese Adressen wurden den verschiedenen Ländern in verschiedenen Intervallen zugeteilt. Somit gibt es für alle Länder (die Internet haben) einen oder mehrere Bereiche, in welchem diese Adressen vergeben können.<br>Trotzdem ist ein Fehler von 2% vorhanden. Das heißt 98 von 100 IP-Adressen werden korrekt zugeordnet.<br>Das Bestimmen des Landes erleichtert uns nun eine Liste, die von http://ip-to-country.webhosting.info bereitgestellt wird. Die Liste ist zip-komprimiert als CSV-Datei verfügbar. CSV ist die Abkürzung für <b><u>C</u></b>omma <b><u>S</u></b>eparated <b><u>V</u></b>alues, was so viel heißt, dass die einzelnen Werte einfach durch Beistriche von einander getrennt gespeichert sind.<br><br>
Die aktuelle Liste ist unter http://ip-to-country.webhosting.info/downloads/ip-to-country.csv.zip downloadbar.<br><br>
Nach dem Download entpacken wir die Liste in irgendein Verzeichnis, von dem wir später dann auch Zugriff haben. Das Suchen von bestimmten Werten erledigen wir später mit einer kleinen mySQL-Tabelle. Doch dazu muss erst der Inhalt der CSV-Datei in eine Tabelle gespeichert werden.<br><br>Die neue Tabelle hat 5 Felder: Beginn des Bereichs, Ende des Bereichs, 2-stelliger Ländercode, 3-stelliger Ländercode und den ausgeschriebenen Namen des Landes.<br>
<div style="background-color:#EEEEEE;">
CREATE TABLE `IPtoCountry` (<br>
`IP_from` DOUBLE NOT NULL ,<br>
`IP_to` DOUBLE NOT NULL ,<br>
`zwei` CHAR( 2 ) NOT NULL ,<br>
`drei` CHAR( 3 ) NOT NULL ,<br>
`name` VARCHAR( 50 ) NOT NULL <br>
);
</div><br>
Jetzt gibt es zwei Möglichkeiten die Daten in die Tabelle zu speichern: entweder ganz einfach mit phpMyAdmin importieren oder aber, die etwas kompliziertere Methode: dazu erstellen wir ein kleines Skript:<br><br>
<b>import.php</b><br>
<div style="background-color:#EEEEEE;">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br /></span><span style="color: #FF8000">// CSV-Datei öffnen
<br /></span><span style="color: #0000BB">$handle </span><span style="color: #007700">= </span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">"ip-to-country.csv"</span><span style="color: #007700">, </span><span style="color: #DD0000">"r"</span><span style="color: #007700">);
<br />
<br /></span><span style="color: #FF8000">// mySQL-Server verbinden
<br /></span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">, </span><span style="color: #DD0000">"root"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">);
<br /></span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"database"</span><span style="color: #007700">);
<br />
<br /></span><span style="color: #FF8000">// Schleife für jede Zeile der Datei durchlaufen
<br /></span><span style="color: #007700">while (</span><span style="color: #0000BB">$zeile </span><span style="color: #007700">= </span><span style="color: #0000BB">fgetcsv</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">, </span><span style="color: #0000BB">1024</span><span style="color: #007700">, </span><span style="color: #DD0000">','</span><span style="color: #007700">, </span><span style="color: #DD0000">'"'</span><span style="color: #007700">)) {
<br /></span><span style="color: #0000BB">$sql </span><span style="color: #007700">= </span><span style="color: #DD0000">"INSERT INTO IPtoCountry VALUES('"</span><span style="color: #007700">.</span><span style="color: #0000BB">$zeile</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">].</span><span style="color: #DD0000">"', '"</span><span style="color: #007700">.</span><span style="color: #0000BB">$zeile</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">].</span><span style="color: #DD0000">"', '"</span><span style="color: #007700">.</span><span style="color: #0000BB">$zeile</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">].</span><span style="color: #DD0000">"', '"</span><span style="color: #007700">.</span><span style="color: #0000BB">$zeile</span><span style="color: #007700">[</span><span style="color: #0000BB">3</span><span style="color: #007700">].</span><span style="color: #DD0000">"', '"</span><span style="color: #007700">.</span><span style="color: #0000BB">$zeile</span><span style="color: #007700">[</span><span style="color: #0000BB">4</span><span style="color: #007700">].</span><span style="color: #DD0000">"');"</span><span style="color: #007700">;
<br /></span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">);
<br />}
<br />
<br /></span><span style="color: #FF8000">// CSV-Datei schließen
<br /></span><span style="color: #0000BB">fclose</span><span style="color: #007700">(</span><span style="color: #0000BB">$handle</span><span style="color: #007700">);
<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</div>
<br>
<b>HINWEIS:</b> Der Pfad zur Datei und die mySQL-Verbindungsdaten müssen natürlich angepasst werden!<br><br>
Im Skript wird die Datei geöffnet und mit der <a href="http://at.php.net/fgetcsv" target="_blank">PHP-Funktion fgetcsv()</a> wird uns jede Zeile der Datei als fertig ausgelesenes Array zurückgegeben.<br>
<br>
Vielleicht ist manchen schon aufgefallen, dass die Felder der IP-Adressen nicht mit direkt ersichtlichen IP-Adressen befüllt sind. Das liegt daran, dass man schwer nach einer IP-Adresse suchen kann, die zum Beispiel kleiner als 82.223.54.154 ist. Wie macht man das nun? Eine IP-Adresse besteht aus 4 Bytes, die jeweils durch die Punkte getrennt sind. Behandelt man nun diese 4 Bytes als eine große Double-Zahl, so kommt man auf die Daten der Liste. Die Formel zur Berechnung der IP-Adresse A.B.C.D lautet:<br><br>
<code>Double = A*256*256*256+B*256*256+C*256+D</code><br><br>
Auch daran wurde bei der Entwicklung von PHP gedacht und es gibt die Funktion <a href="http://de.php.net/ip2long" target="_blank">IP2Long</a>, die die Berechnung für uns übernehmen wird.<br>
<br>
Jetzt kommt die Funtkion, die die Länder aus der Tabelle ausliest:<br><br>
<b>iptocountry.php</b><br>
<div style="background-color:#EEEEEE;">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br /></span><span style="color: #007700">function </span><span style="color: #0000BB">IPtoCountry</span><span style="color: #007700">(</span><span style="color: #0000BB">$IP</span><span style="color: #007700">) {
<br /></span><span style="color: #0000BB">$IP </span><span style="color: #007700">= </span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"%u"</span><span style="color: #007700">,</span><span style="color: #0000BB">IP2Long</span><span style="color: #007700">(</span><span style="color: #0000BB">$IP</span><span style="color: #007700">));
<br /></span><span style="color: #0000BB">mysql_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"localhost"</span><span style="color: #007700">, </span><span style="color: #DD0000">"root"</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">);
<br /></span><span style="color: #0000BB">mysql_select_db</span><span style="color: #007700">(</span><span style="color: #DD0000">"database"</span><span style="color: #007700">);
<br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">mysql_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT name FROM iplist WHERE IP_from &lt;= $IP AND IP_to &gt;= $IP LIMIT 1"</span><span style="color: #007700">);
<br />
<br />if(</span><span style="color: #0000BB">mysql_num_rows</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">) == </span><span style="color: #0000BB">0</span><span style="color: #007700">) {
<br /></span><span style="color: #0000BB">$land </span><span style="color: #007700">= </span><span style="color: #DD0000">"Unbekannt"</span><span style="color: #007700">;
<br />} else {
<br /></span><span style="color: #0000BB">$row </span><span style="color: #007700">= </span><span style="color: #0000BB">mysql_fetch_object</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);
<br /></span><span style="color: #0000BB">$land </span><span style="color: #007700">= </span><span style="color: #0000BB">$row</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;
<br />}
<br />
<br />return </span><span style="color: #0000BB">$land</span><span style="color: #007700">;
<br />}
<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</div>
<br>
Hier werden nur die ausgeschriebenen Namen der Länder ausgelesen. Möglich wären auch alle anderen Angaben.<br>
<br>
Und so wird diese Funktion eingesetzt:<br><br>
<b>demo.php</b><br>
<div style="background-color:#EEEEEE;">
<code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php
<br /></span><span style="color: #007700">include(</span><span style="color: #DD0000">"iptocountry.php"</span><span style="color: #007700">);
<br /></span><span style="color: #0000BB">$IP </span><span style="color: #007700">= </span><span style="color: #0000BB">$_SERVER</span><span style="color: #007700">[</span><span style="color: #DD0000">'REMOTE_ADDR'</span><span style="color: #007700">];
<br />echo </span><span style="color: #DD0000">"Ihre IP-Adresse kommt aus "</span><span style="color: #007700">.</span><span style="color: #0000BB">IPtoCountry</span><span style="color: #007700">(</span><span style="color: #0000BB">$IP</span><span style="color: #007700">).</span><span style="color: #DD0000">"\n\n"</span><span style="color: #007700">;
<br />
<br />echo </span><span style="color: #DD0000">"This script uses the IP-to-Country Database
<br /> provided by WebHosting.Info (http://www.webhosting.info),
<br /> available from http://ip-to-country.webhosting.info."</span><span style="color: #007700">;
<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code>
</div>
<br>
Eine mögliche Erweiterung wäre: die Nationalflaggen unter dem 3-stelligen Code abspeichern und dann einen IMG-Tag einbinden:<br>
<div style="background-color:#EEEEEE;">
<code><span style="color: #FF8000">// $drei = dreistelliger Ländercode
<br />// $name = ausgeschriebener Name des Landes
<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">'&lt;img src="/flaggen/'</span><span style="color: #007700">.</span><span style="color: #0000BB">$drei</span><span style="color: #007700">.</span><span style="color: #DD0000">'.gif" alt="'</span><span style="color: #007700">.</span><span style="color: #0000BB">$name</span><span style="color: #007700">.</span><span style="color: #DD0000">'"&gt;'</span><span style="color: #007700">;
<br /></span>
</span>
</code>
</div>
<br>
Es lässt sich selbsverständlich noch viel Anderes damit machen; also frohes Schaffen!</span><br><br><TABLE height=100 cellSpacing=4 cellPadding=0 width="100%" bgColor=#F4F4F4 border=0>
                    <TBODY>
                    <TR>
                      <TD vAlign=top>
                        <TABLE height="100%" cellSpacing=0 cellPadding=0
                        width="100%" border=0>
                          <TBODY>
                          <TR>
                            <TD vAlign=top width=150>
                              <TABLE height="100%" cellSpacing=0 cellPadding=0
                              width="100%" border=0>
                                <TBODY>
                                <TR>
                                <TD class=text
                                vAlign=top><B><a href="/user/2241/Goergi/RankingDetails.html">Goergi</a></B><BR>Developer</TD></TR>
                                <TR>
                                <TD class=text vAlign=center>
                                </TD></TR>
                                <TR>
                                <TD class=text vAlign=bottom>Beitrag
                                vom:<BR>01-12-2006, 18:24:53
                              </TD></TR></TBODY></TABLE></TD>
                            <TD width=10><IMG height=100
                              src="/common/images/design/spacer.gif"
                              width=10></TD>
                            <TD vAlign=top width=*>
                              <P><B class=text></B></P>
                              <P class=text>Hallo!<br />
Danke, dass du mich auf den Fehler aufmerksam gemacht hast! Es fehlt das zweite '='-Zeichen.<br />
Ist aber schon korrigiert ;-)<br />
mfg<br />
Goergi
							  <br><br>-----------------------------------------------------<br>~~~ Firefox 2.0 ~~~
http://www.mozilla.com - deutsche Version
                          </P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><br><TABLE height=100 cellSpacing=4 cellPadding=0 width="100%" bgColor=#e2e2e2 border=0>
                    <TBODY>
                    <TR>
                      <TD vAlign=top>
                        <TABLE height="100%" cellSpacing=0 cellPadding=0
                        width="100%" border=0>
                          <TR>
                            <TD vAlign=top width=150>
                              <TABLE height="100%" cellSpacing=0 cellPadding=0
                              width="100%" border=0>
                                <TBODY>
                                <TR>
                                <TD class=text
                                vAlign=top><B><a href="/user/2928/Beutelratte/RankingDetails.html">Beutelratte</a></B><BR>Rookie</TD></TR>
                                <TR>
                                <TD class=text vAlign=center>
                                </TD></TR>
                                <TR>
                                <TD class=text vAlign=bottom>Beitrag
                                vom:<BR>01-12-2006, 17:46:49
                              </TD></TR></TBODY></TABLE></TD>
                            <TD width=10><IMG height=100
                              src="/common/images/design/spacer.gif"
                              width=10></TD>
                            <TD vAlign=top width=*>
                              <P><B class=text>Fehler</B></P>
                              <P class=text>Hallo ich hab immer einen Fehler bei der IP Ermittlung:<br />
<br />
<br />
Parse error: syntax error, unexpected '=' in /home/www/web31/html/ip/iptocountry.php on line 8<br />
<br />

							  <br><br>-----------------------------------------------------<br>
                          </P></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE><br>	    <!-- RSa: versuch mit Werbung unter Content -->
	    <p>
		    <script type="text/javascript"><!--
			google_ad_client = "pub-3268643893871372";
			google_ad_width = 468;
			google_ad_height = 60;
			google_ad_format = "468x60_as";
			google_ad_type = "text_image";
			google_ad_channel ="5729570860";
			//--></script>
			<script type="text/javascript"
			  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
</p>

 		    <!-- RSa: versuch mit Werbung unter Content -->


<p class="text"><a href="#top">[back to top]</a></p>

</td>
<td class="right-side text center">
    <br><br>

	<img src="/common/images/design/register/userdaten.gif" width="150" height="20" alt="Userdaten">
	<div class="box text">

		 User nicht eingeloggt<br>
		 40 User online<br><br>
		 <a href="/user/Gesamtranking-1-100.html" class="toolbar">Gesamtranking</a>
		</div>
<img src="/common/images/design/register/werbung.gif" width="150" height="20" alt="Werbung">
	<div class="box text">
		<div class="center ad-sidebar"><script>
if(typeof(adlink_randomnumber)=="undefined"){var adlink_randomnumber=Math.floor(Math.random()*10000000000)}
if(typeof(WLRCMD)=="undefined"){var WLRCMD=""}
if(typeof(adlink_tile)=="undefined"){var adlink_tile=1}else{adlink_tile++}
 document.write('<scr'+'ipt language="JavaScript" src="http://ad.at.doubleclick.net/adj/itacademy.cc/DE_ROS_MBR_R_1x1;'+WLRCMD+';sz=120x468,120x600,160x600;tile='+adlink_tile+';ord='+adlink_randomnumber+'?"><\/scr'+'ipt>');
</script>
<noscript>
<a href="http://ad.at.doubleclick.net/jump/itacademy.cc/DE_ROS_MBR_R_1x1;sz=120x468,120x600,160x600;TILE=3;ord=1234567890?" target="_blank">
<img src="http://ad.at.doubleclick.net/ad/itacademy.cc/DE_ROS_MBR_R_1x1;sz=120x468,120x600,160x600;TILE=3;ord=1234567890?" border="0">
</a></noscript>
		</div>
	</div>    <img src="/common/images/design/register/datenbankstand.gif" width="150" height="20" alt="Datenbankstand">
	<div class="box text">

		<span class="float-left">Autoren:</span><span class="float-right">03238</span><br>
		<span class="float-left">Artikel:</span><span class="float-right">00828</span><br>
		<span class="float-left">Glossar:</span><span class="float-right">04616</span><br>
		<span class="float-left">News:</span><span class="float-right">03460</span><br>
		<span class="float-left">Userbeitr&auml;ge:</span><span class="float-right">15895</span><br>
		<span class="float-left">Queueeintr&auml;ge:</span><span class="float-right">00001</span><br>
	</div>

	<img src="/common/images/design/register/news.gif" width="150" height="20" alt="News">
	<div class="box text">
<a href="http://www.it-news.cc/index.php?type=article&amp;ID=4700"  class="toolbar">VeriFone Introduces VX810 Duet with Innovative Dual-User Design for Merchant and Customer Use </a><br><br>
<a href="http://www.it-news.cc/index.php?type=article&amp;ID=4699"  class="toolbar">Ab sofort werden NTP Software QFS, NTP Software Storage M&A und NTP Software Storage Billing System von EMC angeboten </a><br><br>
<a href="http://www.it-news.cc/index.php?type=article&amp;ID=4698"  class="toolbar">Deutliche Preisnachlässe beim IT-Outsourcing erreichen</a><br><br>
		<a href="http://www.it-news.cc" class="toolbar center block">[Mehr News]</a>
	</div>

	<img src="/common/images/design/register/umfrage.gif" width="150" height="20" alt="Umfrage">

	<div class="box text">
		Virtualisieren Sie schon?
		<form name="submit" action="/common/database.php" method="POST">
		<input type="hidden" name="action" value="poll">
		<input type="radio" name="where" value="hits1">Bitte wie?<br>
		<input type="radio" name="where" value="hits2">Ja, mit Microsoft!<br>
		<input type="radio" name="where" value="hits3">Ja, mit VMWARE!<br>
		<input type="radio" name="where" value="hits4">Ja, andere!<br>
		<input type="radio" name="where" value="hits5">Nein!<br><br>
		<span class="center block">
			<input type="submit" name="Submit" value="Abstimmen" class="eingabefelder"><br><br>
			<a href="/umfrage/Ergebnis-90.html" class="toolbar">[Results]</a> | <a href="/umfrage/Archiv.html" class="toolbar">[Archiv]</a>
			Votes: 538<br>
			Comments: 8
		</span>
		</form>
	</div>	<img src="/common/images/design/register/tauschboerse.gif" width="150" height="20" alt="Tauschb&ouml;rse">
	<div class="box text">		 
<a href="/admin/shop_index.php?ShopMenuID=3#item249"  class="toolbar">Praxistaugliche Biometrie und RFID (25 Credits)</a><br><br><a href="/admin/shop_index.php?ShopMenuID=13#item223"  class="toolbar">Mail Melder 1.0 Lizenz (15 Credits)</a><br><br><a href="/admin/shop_index.php?ShopMenuID=2#item236"  class="toolbar">DVD: Garden State (10 Credits)</a><br><br>		<span class="center block"><a href="http://www.it-academy.cc/user/dokumentation.php#6.6." class="toolbar">[Infos]</a> | <a href="http://www.it-academy.cc/admin/shop_index.php?ShopMenuID=1" class="toolbar">[&Uuml;bersicht]</a></span>
	</div>

</td>
</tr>
</table>

</body>
</html>

